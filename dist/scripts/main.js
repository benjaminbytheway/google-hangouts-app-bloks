define("app",[],function(){var t,e=function(t){var e,o={};for(e in t)if(t.hasOwnProperty(e))try{o[e]=JSON.parse(t[e])}catch(a){}return o},o=function(t){var e,o={};for(e in t)if(t.hasOwnProperty(e))try{o[e]=JSON.stringify(t[e])}catch(a){}return o},a={LOBBY:1,CHOOSE_COLOR:2,PLAY:3,DETERMINE_WINNER:4,CONGRATULATIONS:5};return t=angular.module("app",[]),t.run(["$rootScope",function(t){t.me=gapi.hangout.getLocalParticipant(),t.state=e(gapi.hangout.data.getState())||{},t.state.game||(t.state.game={}),t.state.game.currentStage||(t.state.game.currentStage=a.LOBBY),t.state.players||(t.state.players=[]),t.state.colors||(t.state.colors={}),gapi.hangout.data.onStateChanged.add(function(o){var a,n,r,i;a=e(o.state);for(n in a)r=a[n],i=o.metadata[n];t.state=a,window.state=a,t.$apply()}),t.$watch("state",function(e,a,n){gapi.hangout.data.submitDelta(o(t.state)),window.state=t.state},!0),t.computers=0,t.addPlayer=function(e){var o,a;if(a=t.state.players,e.player&&e.player.id&&a.length<4&&!t.findPlayerById(e.player.id)){if(o={},!e.player.type)throw new Error("config.player.type was not provided");if(o.type=e.player.type,"human"===o.type){if(!e.player.id)throw new Error("config.player.id was not provided");if(o.id=e.player.id,!e.player.name)throw new Error("config.player.name was not provided");o.name=e.player.name,e.player.image&&(o.image=e.player.image)}else{if("computer"!==o.type)throw new Error('config.player.type is not a supported type (either "human", or "computer")');o.id="computer-"+Math.floor(1e4*Math.random()),o.name="Computer "+t.computers+1}return a.push(o),t.state.host||"human"!==o.type||(t.state.host=o),!0}return!1},t.findPlayerById=function(e){var o,a,n,r;for(r=t.state.players,o=0,a=r.length;a>o;o++)if(n=r[o],n.id===e)return n;return null},t.removePlayer=function(e){var o,a,n;if(n=t.state.players,!e.player)return!1;for(o=n.length-1;o>=0;o--)if(n[o]===e.player)return a=n.splice(o,1),!0;return!1},t.showLeaveModal=!1,t.leave=function(){var e,o,a,n,r=!1;if(n=t.state.players,t.state.host&&t.state.host.id===t.me.person.id&&(r=!0),r)for(t.state.host=null,e=0,o=n.length;o>e;e++)if(a=n[e],t.me.person.id!==a.id&&"human"===a.type){t.state.host=a;break}t.removePlayer({player:t.findPlayerById(t.me.person.id)})},gapi.hangout.onParticipantsDisabled.add(function(e){var o,a,n,r,i,s,l=!1,u=!1;if(s=t.state.players,t.state.host)for(o=0,a=e.disabledParticipants.length;a>o;o++)if(r=e.disabledParticipants[o],r.person.id===t.state.host.id){l=!0;break}if(l)for(o=0,a=s.length;a>o;o++)if(i=s[o],t.me.person.id===i.id&&"human"===i.type&&t.state.host.id!==i.id){t.state.host=i;break}if(t.state.host&&t.state.host.id===t.me.person.id&&(u=!0),u)for(o=0,a=e.disabledParticipants.length;a>o;o++)for(r=e.disabledParticipants[o],n=s.length-1;n>=0;n--)if(i=s[n],r.person.id===i.id){t.removePlayer({player:i});break}t.$apply()}),t.join=function(){t.addPlayer({player:{type:"human",id:t.me.person.id,name:t.me.person.displayName,image:t.me.person.image.url}})},t.begin=function(){t.state.game.currentStage=a.CHOOSE_COLOR},t.isPlayer=function(){var e,o,a,n;for(o=t.state.players,a=0,n=o.length;n>a;a++)if(e=o[a],t.me.person.id===e.id)return!0;return!1},t.chooseColor=function(e){var o,a,n,r,i,s,l,u={blue:"Blue",red:"Red",green:"Green",yellow:"Yellow"};if(a=t.state.colors,o=t.state.players,t.myRemainingColors()&&!a[e]&&(a[e]={type:1,id:t.me.person.id,label:u[e]}),3===o.length&&3===Object.keys(a).length){for(e in u)if(!a[e])break;for(i=[],s=0,l=o.length;l>s;s++){r=o[s];do n=Math.floor(3*Math.random());while(i[n]);i[n]=r.id}a[e]={type:2,id:i[0],order:i,current:0,label:u[e]}}},t.myRemainingColors=function(){var e,o,a,n,r=0;if(a=t.state.colors,n=t.state.players,t.isPlayer()){2===n.length?r=2:(3===n.length||4===n.length)&&(r=1);for(o in a)e=a[o],1===e.type&&t.me.person.id===e.id&&r--}return r},t.getMyColors=function(){var e,o,a,n=[];a=t.state.colors;for(o in a)e=a[o],1===e.type&&t.me.person.id===e.id&&n.push(e);return n},t.getSharedColor=function(){var e,o,a,n;if(n=t.state.players,3===n.length){a=t.state.colors;for(o in a)if(e=a[o],2===e.type)return e}return null},t.displayColors=function(){var e="",o=t.getMyColors(!0);return o[0]&&o[0].label&&(e=o[0].label,o[1]&&o[1].label&&(e+=" and "+o[1].label)),e},t.displayChoosenColors=function(){return Object.keys(t.state.colors)},t.displaySharedColor=function(){var e=t.getSharedColor();return e&&e.label?e.label:!1},t.start=function(){t.state.game.currentStage=a.PLAY,t.play(),t.init()},t.play=function(){t.state.board=[]},t.init=function(){function t(t){var e,o,a=t.length,n=t[0].length,r=0,i=0,s=[];for(o=0;n>o;o++){for(e=a-1;e>=0;e--)s[r]||(s[r]=[]),s[r][i]=t[e][o],i++;r++,i=0}return s}function e(t){var e,o,a=t.length,n=t[0].length,r=0,i=0,s=[];for(o=n-1;o>=0;o--){for(e=0;a>e;e++)s[r]||(s[r]=[]),s[r][i]=t[e][o],i++;r++,i=0}return s}function o(t){var e,o,a=t.length,n=t[0].length,r=0,i=0,s=[];for(e=a-1;e>=0;e--){for(o=0;n>o;o++)s[r]||(s[r]=[]),s[r][i]=t[e][o],i++;r++,i=0}return s}function a(t){var e,o,a=t.length,n=t[0].length,r=0,i=0,s=[];for(e=0;a>e;e++){for(o=n-1;o>=0;o--)s[r]||(s[r]=[]),s[r][i]=t[e][o],i++;r++,i=0}return s}function n(t,e,o){var a,n,r,i,s=t.userData.layout,l=s.length,u=s[0].length,c=!0,d=!0,p=!1,y=!1;for(a=0,n=l;n>a;a++){for(r=0,i=u;i>r;r++){if(U[e+a]&&U[e+a][o+r]||(c=!1),U[e+a]&&U[e+a][o+r]&&U[e+a][o+r].userData.block&&s[a][r]){d=!1;break}e+a!==0&&e+a!==19||o+r!==0&&o+r!==19||!s[a]||!s[a][r]||(y=!0),U[e+a]&&U[e+a][o+r]&&s[a]&&s[a][r]&&(U[e+a-1]&&U[e+a-1][o+r-1]&&U[e+a-1][o+r-1].userData.block&&U[e+a-1][o+r-1].userData.block.userData.colorAgent===t.userData.colorAgent||U[e+a+1]&&U[e+a+1][o+r-1]&&U[e+a+1][o+r-1].userData.block&&U[e+a+1][o+r-1].userData.block.userData.colorAgent===t.userData.colorAgent||U[e+a-1]&&U[e+a-1][o+r+1]&&U[e+a-1][o+r+1].userData.block&&U[e+a-1][o+r+1].userData.block.userData.colorAgent===t.userData.colorAgent||U[e+a+1]&&U[e+a+1][o+r+1]&&U[e+a+1][o+r+1].userData.block&&U[e+a+1][o+r+1].userData.block.userData.colorAgent===t.userData.colorAgent)&&(y=!0),U[e+a]&&U[e+a][o+r]&&s[a]&&s[a][r]&&(U[e+a-1]&&U[e+a-1][o+r]&&U[e+a-1][o+r].userData.block&&U[e+a-1][o+r].userData.block.userData.colorAgent===t.userData.colorAgent||U[e+a+1]&&U[e+a+1][o+r]&&U[e+a+1][o+r].userData.block&&U[e+a+1][o+r].userData.block.userData.colorAgent===t.userData.colorAgent||U[e+a]&&U[e+a][o+r-1]&&U[e+a][o+r-1].userData.block&&U[e+a][o+r-1].userData.block.userData.colorAgent===t.userData.colorAgent||U[e+a]&&U[e+a][o+r+1]&&U[e+a][o+r+1].userData.block&&U[e+a][o+r+1].userData.block.userData.colorAgent===t.userData.colorAgent)&&(p=!0)}if(!c||!d||p)break}return c&&d&&!p&&y}function r(t){var e,o,a,r;t.preventDefault(),v.x=event.clientX/it*2-1,v.y=2*-(event.clientY/st)+1,_=null,X=null,D.setFromCamera(v,p),F&&$?D.ray.intersectPlane(P,T)&&($.position.copy(T.sub(R)),a=$.userData.layout.length,r=$.userData.layout[0].length,_=Math.floor((T.x+dt*lt/2-a*lt/2+lt/2)/lt),X=Math.floor((T.z+pt*ut/2-r*ut/2+ut/2)/ut),d.remove(Y),U[_]&&U[_][X]&&(G=U[_][X],n($,_,X)&&(Y=$.clone(),Y.position.copy(G.position),Y.position.x=Y.position.x+a*lt/2-lt/2,Y.position.z=Y.position.z+r*ut/2-ut/2,Y.position.y=Y.position.y+ct/2,d.add(Y)))):(o=D.intersectObjects(at,!0),o.length>0?(e=o[0],J=e.object.parent?e.object.parent:e.object,et.style.cursor="move"):(J=null,et.style.cursor="auto"))}function i(t){var e,o;t.preventDefault(),D.setFromCamera(v,p),o=D.intersectObjects(at,!0),o.length>0&&(e=o[0],b.enabled=!1,F=e.object,e.object.parent&&($=e.object.parent),D.ray.intersectPlane(P,T)&&R.copy(T).sub($.position)),et.style.cursor="move"}function s(t){var e,o,a,r,i,s;if(t.preventDefault(),b.enabled=!0,F&&$)if(n($,_,X)){for(G=U[_][X],e=0,o=$.userData.layout.length;o>e;e++)for(I=0,W=$.userData.layout[e].length;W>I;I++)$.userData.layout[e][I]&&(U[_+e][X+I].userData.block=$);a=$.userData.layout.length,r=$.userData.layout[0].length,q=new TWEEN.Tween($.position).to({x:G.position.x+a*lt/2-lt/2,z:G.position.z+r*ut/2-ut/2,y:G.position.y+ct/2},200).easing(TWEEN.Easing.Bounce.Out).onComplete(function(){q=null}).start(),at.splice(at.indexOf($),1),F=null,$=null,d.remove(Y)}else $.position.x>2.2&&$.position.x<8&&$.position.z<2.4&&$.position.z>-2.4&&($.startPosition.x=$.position.x,$.startPosition.z=$.position.z,$.startRotation=$.rotation),i=$.startPosition,s=$.startRotation,q=new TWEEN.Tween($.position).to({x:i.x,z:i.z,y:i.y},200).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){q=null}).start(),new TWEEN.Tween($.rotation).to({y:s.y,z:s.z},200).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){q=null}).start();J&&(F=null,$=null)}function l(n){var r,i,s;n.preventDefault(),$&&!M&&(s=$,37===n.keyCode?(s.isRotated=!s.isRotated,s.userData.layout=t(s.userData.layout),i=s.rotation.y,M=new TWEEN.Tween(s.rotation).to({y:i+Math.PI/2},200).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){M=null,s=null}).start()):38===n.keyCode?(s.isUpsideDown=!s.isUpsideDown,s.isRotated?s.userData.layout=a(s.userData.layout):s.userData.layout=o(s.userData.layout),r=s.rotation.z,M=new TWEEN.Tween(s.rotation).to({z:r+Math.PI},200).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){M=null,s=null}).start()):39===n.keyCode?(s.isRotated=!s.isRotated,s.userData.layout=e(s.userData.layout),i=s.rotation.y,M=new TWEEN.Tween(s.rotation).to({y:i-Math.PI/2},200).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){M=null,s=null}).start()):40===n.keyCode&&(s.isUpsideDown=!s.isUpsideDown,s.isRotated?s.userData.layout=a(s.userData.layout):s.userData.layout=o(s.userData.layout),r=s.rotation.z,M=new TWEEN.Tween(s.rotation).to({z:r-Math.PI},200).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){M=null,s=null}).start()))}function u(){b.update(),h.render(d,p)}function c(t){requestAnimationFrame(c),TWEEN.update(t),u()}var d,p,y,E,f,h,g,w,m,D,P,R,T,v,b,C,H,x,z,k,S,O,V,A,M,q,N,L,I,W,B,j,U,Y,G,J,F,$,_,X,Z,K,Q=window,tt=document,et=tt.getElementById("canvas-container"),ot=new THREE.JSONLoader,at=[],nt={blue:{hex:255},green:{hex:65280},yellow:{hex:16776960},red:{hex:16711680}},rt=[{id:21,startPosition:new THREE.Vector3(2.2,.1,1.5),squareCount:5,layout:[[1,1,1,1,1]]},{id:20,startPosition:new THREE.Vector3(2.6,.1,1.5),squareCount:5,layout:[[1,1,1,1],[1,0,0,0]]},{id:19,startPosition:new THREE.Vector3(3.1,.1,1.5),squareCount:5,layout:[[1,1,1,1],[0,1,0,0]]},{id:18,startPosition:new THREE.Vector3(3.6,.1,1.5),squareCount:5,layout:[[0,1,1,1],[1,1,0,0]]},{id:17,startPosition:new THREE.Vector3(2.4,.1,.6),squareCount:5,layout:[[1,1,1],[1,0,0],[1,0,0]]},{id:16,startPosition:new THREE.Vector3(3.1,.1,.6),squareCount:5,layout:[[0,1,1],[1,1,0],[1,0,0]]},{id:15,startPosition:new THREE.Vector3(3.8,.1,.6),squareCount:5,layout:[[0,1,1],[0,1,0],[1,1,0]]},{id:14,startPosition:new THREE.Vector3(2.4,.1,-.1),squareCount:5,layout:[[1,1,1],[0,1,0],[0,1,0]]},{id:13,startPosition:new THREE.Vector3(3.1,.1,-.1),squareCount:5,layout:[[0,1,1],[1,1,0],[0,1,0]]},{id:12,startPosition:new THREE.Vector3(3.8,.1,-.1),squareCount:5,layout:[[0,1,0],[1,1,1],[0,1,0]]},{id:11,startPosition:new THREE.Vector3(4.1,.1,1.5),squareCount:5,layout:[[1,1,1],[1,1,0]]},{id:10,startPosition:new THREE.Vector3(4.4,.1,.6),squareCount:5,layout:[[1,1,1],[1,0,1]]},{id:9,startPosition:new THREE.Vector3(2.2,.1,-.9),squareCount:4,layout:[[1,1,1,1]]},{id:8,startPosition:new THREE.Vector3(2.6,.1,-.9),squareCount:4,layout:[[1,1,1],[1,0,0]]},{id:7,startPosition:new THREE.Vector3(3.1,.1,-.9),squareCount:4,layout:[[1,1,1],[0,1,0]]},{id:6,startPosition:new THREE.Vector3(3.6,.1,-.9),squareCount:4,layout:[[1,1,0],[0,1,1]]},{id:5,startPosition:new THREE.Vector3(4.1,.1,-.9),squareCount:4,layout:[[1,1],[1,1]]},{id:4,startPosition:new THREE.Vector3(2.2,.1,-1.7),squareCount:3,layout:[[1,1,1]]},{id:3,startPosition:new THREE.Vector3(2.6,.1,-1.7),squareCount:3,layout:[[1,1],[1,0]]},{id:2,startPosition:new THREE.Vector3(3,.1,-1.7),squareCount:2,layout:[[1,1]]},{id:1,startPosition:new THREE.Vector3(3.3,.1,-1.7),squareCount:1,layout:[[1]]}],it=et.offsetWidth,st=et.offsetHeight,lt=.2,ut=.2,ct=.04,dt=20,pt=20,yt=.6;for(h=new THREE.WebGLRenderer,h.setSize(it,st),h.setClearColor(16777215),h.shadowMap.enabled=!0,d=new THREE.Scene,p=new THREE.PerspectiveCamera(45,it/st,.1,1e3),p.position.x=6,p.position.y=6,p.position.z=6,p.rotation.x=0,p.rotation.y=0,p.rotation.z=0,p.lookAt(new THREE.Vector3(0,0,0)),y=tt.getElementById("view-1"),E=tt.getElementById("view-2"),f=tt.getElementById("view-3"),y.addEventListener("click",function(t){p.position.x=0,p.position.y=10,p.position.z=0,p.rotation.x=0,p.rotation.y=0,p.rotation.z=0,p.lookAt(new THREE.Vector3(0,0,0))}),E.addEventListener("click",function(t){p.position.x=0,p.position.y=6,p.position.z=9,p.rotation.x=0,p.rotation.y=0,p.rotation.z=0,p.lookAt(new THREE.Vector3(0,0,0))}),f.addEventListener("click",function(t){p.position.x=6,p.position.y=6,p.position.z=6,p.rotation.x=0,p.rotation.y=0,p.rotation.z=0,p.lookAt(new THREE.Vector3(0,0,0))}),Q.addEventListener("resize",function(){it=et.offsetWidth,st=et.offsetHeight,p.aspect=it/st,p.updateProjectionMatrix(),h.setSize(it,st)},!1),b=new THREE.TrackballControls(p),b.rotateSpeed=1,b.zoomSpeed=1.2,b.panSpeed=.3,b.noZoom=!1,b.noPan=!1,b.noRotate=!1,b.staticMoving=!1,b.dynamicDampingFactor=.3,g=[],w=0,g[w]=new THREE.DirectionalLight(16777215,.25),g[w].position.x=-50,g[w].position.y=50,g[w].position.z=-50,g[w].castShadow=!0,d.add(g[w]),w=1,g[w]=new THREE.DirectionalLight(16777215,.25),g[w].position.x=50,g[w].position.y=50,g[w].position.z=50,g[w].castShadow=!0,d.add(g[w]),w=2,g[w]=new THREE.DirectionalLight(16777215,.25),g[w].position.x=-50,g[w].position.y=50,g[w].position.z=50,g[w].castShadow=!0,d.add(g[w]),w=3,g[w]=new THREE.DirectionalLight(16777215,.25),g[w].position.x=50,g[w].position.y=50,g[w].position.z=-50,g[w].castShadow=!0,d.add(g[w]),w=4,g[w]=new THREE.DirectionalLight(16777215,.25),g[w].position.x=0,g[w].position.y=-50,g[w].position.z=0,g[w].castShadow=!0,d.add(g[w]),m=new THREE.AmbientLight(5263440),d.add(m),U=[],H=ot.parse({metadata:{},scale:1,materials:[],vertices:[-.1,0,.1,-.1,.01,.1,-.1,0,-.1,-.1,.01,-.1,.1,0,.1,.1,.01,.1,.1,0,-.1,.1,.01,-.1,.0975,.01,.0975,-.0975,.01,.0975,.0975,.01,-.0975,-.0975,.01,-.0975,.095,0,.095,-.095,0,.095,.095,0,-.095,-.095,0,-.095],morphTargets:[],morphColors:[],normals:[-1,0,0,0,0,-1,1,0,0,0,0,1,0,-1,0,0,1,0,-.9701,.2425,0,0,.2425,.9701,0,.2425,-.9701,.9701,.2425,0],colors:[],uvs:[[]],faces:[35,1,3,2,0,0,0,0,0,0,35,3,7,6,2,0,1,1,1,1,35,7,5,4,6,0,2,2,2,2,35,5,1,0,4,0,3,3,3,3,35,0,2,6,4,0,4,4,4,4,35,9,11,3,1,0,5,5,5,5,35,5,8,9,1,0,5,5,5,5,35,5,7,10,8,0,5,5,5,5,35,8,10,14,12,0,6,6,6,6,35,10,7,3,11,0,5,5,5,5,35,12,14,15,13,0,5,5,5,5,35,10,11,15,14,0,7,7,7,7,35,9,8,12,13,0,8,8,8,8,35,11,9,13,15,0,9,9,9,9]}).geometry,N=0,L=dt;L>N;N++)for(U[N]=[],I=0,W=pt;W>I;I++)x=new THREE.MeshPhongMaterial({color:16579836,shininess:50,side:THREE.DoubleSide}),C=new THREE.Mesh(H,x),C.position.x=N*lt-dt*lt/2+lt/2,C.position.z=I*ut-pt*ut/2+ut/2,C.castShadow=!0,C.receiveShadow=!1,C.userData.xIndex=N,C.userData.zIndex=I,C.userData.block=null,C.userData.square=null,U[N][I]=C,d.add(C);z=new THREE.BoxGeometry(dt*lt,yt,pt*ut),k=new THREE.MeshPhongMaterial({color:16579836,shininess:50,side:THREE.DoubleSide}),S=new THREE.Mesh(z,k),S.position.y=-(yt/2)-1e-4,d.add(S);var Et,ft,ht,gt,wt,mt;for(Z in nt)for(K=nt[Z],B=0,j=rt.length;j>B;B++){for(ft=rt[B],Et=new THREE.Group,Et.userData.layout=JSON.parse(JSON.stringify(ft.layout)),Et.userData.squareCount=ft.squareCount,Et.userData.colorAgent=K,Et.userData.color=Z,ht=Et.userData.layout.length,gt=Et.userData.layout[0].length,N=0,L=ft.layout.length;L>N;N++)for(wt=ft.layout[N],I=0,W=wt.length;W>I;I++)mt=wt[I],mt&&(V=ot.parse({metadata:{},scale:1,materials:[],vertices:[.1,.01,-.1,-.1,.01,.1,.1,.01,.1,-.1,.01,-.1,-.1,.03,.1,.1,.03,.1,-.1,.03,-.1,.1,.03,-.1,-.0925,.03,.0925,-.0925,.03,-.0925,.0925,.03,.0925,.0925,.03,-.0925,-.0925,.04,.0925,-.0925,.04,-.0925,.0925,.04,.0925,.0925,.04,-.0925,-.0925,.01,.0925,.0925,.01,.0925,-.0925,.01,-.0925,.0925,.01,-.0925,-.0925,0,.0925,.0925,0,.0925,-.0925,0,-.0925,.0925,0,-.0925,-.065,.04,.065,-.065,.04,-.065,.065,.04,.065,.065,.04,-.065,-.065,.03,.065,-.065,.03,-.065,.065,.03,.065,.065,.03,-.065,-.065,0,.065,.065,0,.065,-.065,0,-.065,.065,0,-.065,-.065,.01,.065,.065,.01,.065,-.065,.01,-.065,.065,.01,-.065],morphTargets:[],morphColors:[],normals:[0,0,-1,0,0,1,1,0,0,-1,0,0,0,1,0,0,-1,0],colors:[],uvs:[[]],faces:[35,0,3,6,7,0,0,0,0,0,35,1,2,5,4,0,1,1,1,1,35,2,0,7,5,0,2,2,2,2,35,3,1,4,6,0,3,3,3,3,35,9,11,7,6,0,4,4,4,4,35,4,8,9,6,0,4,4,4,4,35,4,5,10,8,0,4,4,4,4,35,11,9,13,15,0,0,0,0,0,35,10,5,7,11,0,4,4,4,4,35,10,11,15,14,0,2,2,2,2,35,9,8,12,13,0,3,3,3,3,35,8,10,14,12,0,1,1,1,1,35,17,19,0,2,0,5,5,5,5,35,1,16,17,2,0,5,5,5,5,35,1,3,18,16,0,5,5,5,5,35,17,16,20,21,0,1,1,1,1,35,18,3,0,19,0,5,5,5,5,35,16,18,22,20,0,3,3,3,3,35,19,17,21,23,0,2,2,2,2,35,18,19,23,22,0,0,0,0,0,35,25,27,15,13,0,4,4,4,4,35,12,24,25,13,0,4,4,4,4,35,12,14,26,24,0,4,4,4,4,35,24,26,30,28,0,0,0,0,0,35,26,14,15,27,0,4,4,4,4,35,28,30,31,29,0,4,4,4,4,35,26,27,31,30,0,3,3,3,3,35,27,25,29,31,0,1,1,1,1,35,25,24,28,29,0,2,2,2,2,35,33,35,23,21,0,5,5,5,5,35,20,32,33,21,0,5,5,5,5,35,20,22,34,32,0,5,5,5,5,35,33,32,36,37,0,0,0,0,0,35,34,22,23,35,0,5,5,5,5,35,36,38,39,37,0,5,5,5,5,35,32,34,38,36,0,2,2,2,2,35,34,35,39,38,0,1,1,1,1,35,35,33,37,39,0,3,3,3,3]}).geometry,A=new THREE.MeshPhongMaterial({color:Et.userData.colorAgent.hex,transparent:!0,opacity:.75,shininess:75,side:THREE.DoubleSide}),O=new THREE.Mesh(V,A),O.position.x=N*lt-ht*lt/2+lt/2,O.position.z=I*ut-gt*ut/2+ut/2,O.position.y=-ct/2,O.userData.xIndex=N,O.userData.zIndex=I,Et.add(O));Et.startPosition=new THREE.Vector3,Et.startRotation=new THREE.Vector3,Et.isUpsideDown=!1,Et.isRotated=!1,"blue"===Z?(Et.startPosition.x=ft.startPosition.x,Et.startPosition.y=ft.startPosition.y,Et.startPosition.z=ft.startPosition.z,Et.startRotation.y=0):"green"===Z?(Et.startPosition.x=-ft.startPosition.x,Et.startPosition.y=ft.startPosition.y,Et.startPosition.z=-ft.startPosition.z,Et.startRotation.y=Math.PI,Et.userData.layout=t(t(Et.userData.layout))):"red"===Z?(Et.startPosition.x=-ft.startPosition.z,Et.startPosition.y=ft.startPosition.y,Et.startPosition.z=ft.startPosition.x,Et.startRotation.y=Math.PI+Math.PI/2,Et.userData.layout=e(Et.userData.layout),Et.isRotated=!0):"yellow"===Z&&(Et.startPosition.x=ft.startPosition.z,Et.startPosition.y=ft.startPosition.y,Et.startPosition.z=-ft.startPosition.x,Et.startRotation.y=Math.PI/2,Et.userData.layout=t(Et.userData.layout),Et.isRotated=!0),Et.position.x=Et.startPosition.x,Et.position.y=Et.startPosition.y,Et.position.z=Et.startPosition.z,Et.rotation.y=Et.startRotation.y,Et.castShadow=!0,Et.receiveShadow=!1,at.push(Et),d.add(Et)}D=new THREE.Raycaster,v=new THREE.Vector2,P=new THREE.Plane(new THREE.Vector3(0,1,0)),R=new THREE.Vector3,T=new THREE.Vector3,h.domElement.addEventListener("mousemove",r,!1),h.domElement.addEventListener("mousedown",i,!1),h.domElement.addEventListener("mouseup",s,!1),document.addEventListener("keydown",l,!1),et.appendChild(h.domElement),c()}}]),t}),define("events",[],function(){var t={},e={};return{on:function(o,a,n){if(e[o]){if(!n)return;try{a(e[o])}catch(r){console.error(r)}}t[o]||(t[o]=[]),t[o].push(a)},off:function(e,o){var a;if(t[e]&&t[e].length)for(a=t[e].length-1;a>=0;a--)t[e][a]===o&&t[e][a].splice(a,1)},trigger:function(o,a){var n,r,i;if(e[o]=a,t[o]&&t[o].length)for(n=0,r=t[o].length;r>n;n++)if(i=t[o][n])try{i(a)}catch(s){console.error(s)}return!0}}}),require(["app","events"],function(t,e){var o=new Promise(function(t,e){gapi.hangout.onApiReady.add(function(e){e.isApiReady&&t()})});o.then(function(){angular.bootstrap(document,["app"])})}),define("main",function(){});